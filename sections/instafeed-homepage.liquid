{% assign feed = shop.metafields.instagram[shop.metafields.instagram.username.value].value.data  %}
{% assign localOrigin = shop.metafields.instagram.entities.value.localOrigin %}
instagram-designer_editions_uk-icon
{%- capture icon -%}
  {{localOrigin}}/instagram-image?postId=icon&username={{item.username}}
{%- endcapture -%}
<ul class="{% render '[class]-container' fluid:true %} tw-list-none" style="grid-template-columns: repeat(auto-fill, 23vw);display:grid;justify-content: center;gap:6px">
  {%- for item in feed -%}
  {%- capture imageUrl -%}
  {{localOrigin}}/instagram-image?postId={{item.id}}&username={{item.username}}
  {%- endcapture -%}
    <li class="tw-group tw-relative">
      <a target="_blank" href="{{item.permalink}}" class=" ">
        <img src="{{imageUrl}}" loading="lazy" class="lazyload-fade lazyautosizes lazyload" data-src="{{imageUrl}}" data-sizes="auto" width="400" height="400" alt="{{shop.name}}"/>
      </a>
      <label for="post-{{forloop.index}}" class="tw-absolute tw-cursor-pointer tw-inset-0 tw-w-full tw-h-full tw-bg-black tw-bg-opacity-50 tw-opacity-0 group-hover:tw-opacity-100 tw-transition-opacity tw-duration-700 tw-text-white tw-flex tw-justify-center tw-items-center tw-text-xl">
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg>
      </label>
    </li>
  {%- endfor -%}
</ul>
<input type="radio" name="instagram" id="post-none"  />

{%- for item in feed -%}
  {%- capture imageUrl -%}
  {{localOrigin}}/instagram-image?postId={{item.id}}&username={{item.username}}
  {%- endcapture -%}
  <input type="radio" name="instagram" id="post-{{forloop.index}}" class="tw-modal-toggle" />
  <label for="post-{{forloop.index}}" class="tw-modal tw-cursor-pointer tw-bg-opacity-70">
    <label class="tw-modal-box tw-overflow-auto tw-p-0 relative tw-rounded-none tw-max-w-5xl tw-max-h-[80%] tw-h-[620px] lg:tw-flex" for="">
      <div class="tw-aspect-square tw-will-change-scroll lg:tw-sticky tw-top-0">
        <img src="{{imageUrl}}" loading="lazy" class="lazyload-fade  lazyautosizes lazyload" data-src="{{imageUrl}}" data-sizes="auto" width="400" height="400" alt="{{shop.name}}"/>
      </div>
      <div class="tw-flex-1 tw-p-4 tw-space-y-4">
        <div class="tw-flex tw-gap-4 tw-items-center tw-relative tw-pr-12">
          <div class="tw-aspect-square tw-w-12 tw-will-change-scroll lg:tw-sticky tw-top-0">
            <img src="{{icon}}" loading="lazy" class="lazyload-fade tw-rounded-full lazyautosizes lazyload" data-src="{{imageUrl}}" data-sizes="auto" width="400" height="400" alt="{{shop.name}}"/>
          </div>
          <a class="tw-flex-1" target="_blank" href="https://www.instagram.com/{{shop.metafields.instagram.username.value}}/">
            <h3 class="tw-text-lg tw-font-bold tw-leading-none">{{shop.metafields.instagram.username.value}}</h3>
            <div class="tw-text-sm tw-leading-none">{{shop.metafields.instagram.username.value}}</div>
          </a>
        </div>
        <div class="tw-border-b tw-w-full"></div>
        <div class="tw-space-y-4">
          <div class="tw-flex tw-justify-between tw-w-full">
            <label for="post-{{forloop.index | plus: 1}}" class="tw-p-1  tw-btn tw-btn-square tw-btn-sm tw-text-2xl tw-btn-ghost">
              <svg height="1em" viewBox="0 0 100 100" width="1em">
                <path class="arrow" d="M 10,50 L 50,90 L 55,90 L 15,50  L 55,10 L 50,10 Z" ></path>
            </svg>
            </label>
            <label for="post-{{forloop.index | minus:1}}" class="tw-p-1  tw-btn tw-btn-square tw-btn-sm tw-text-2xl tw-btn-ghost">
              <svg height="1em" viewBox="0 0 100 100" width="1em">
                <path class="arrow" d="M 10,50 L 50,90 L 55,90 L 15,50  L 55,10 L 50,10 Z" transform="translate(100, 100) rotate(180) "></path>
            </svg>
            </label>
          </div>
          <p class="tw-py-4 tw-whitespace-pre-line">{{item.caption}}</p>
        </div>
        
      </div>
      <label for="post-none" class="tw-p-1 tw-absolute tw-top-2 tw-right-2 tw-btn tw-btn-square tw-btn-sm tw-text-2xl tw-btn-ghost">
        <svg aria-label="Close" class="_8-yf5 " color="#8e8e8e" fill="#8e8e8e" height="16" role="img" viewBox="0 0 24 24" width="16"><line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="3" y2="21"></line><line fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" x1="21" x2="3" y1="21" y2="3"></line></svg>
      </label>
      
    </label>
    
  </label>
  {%- endfor -%}
